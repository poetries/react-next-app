(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{837:function(t,e,o){__NEXT_REGISTER_PAGE("/search",function(){return t.exports=o(838),{page:t.exports.default}})},838:function(t,e,o){"use strict";o.r(e),o.d(e,"default",function(){return M});var n,r=o(38),a=o.n(r),s=o(1),i=o.n(s),c=o(72),u=o(11),p=o(12),f=o(16),l=o(6),h=o(26);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(){return(g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function b(t,e,o,n,r,a,s){try{var i=t[a](s),c=i.value}catch(t){return void o(t)}i.done?e(c):Promise.resolve(c).then(n,r)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e,o){return e&&v(t.prototype,e),o&&v(t,o),t}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function j(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n  padding-top: 4px;\n\t.am-search.am-search-start .am-search-input input[type="search"] {\n\t\tpadding-left: 10px;\n\t}\n']);return j=function(){return t},t}o(216);var L=f.a.div(j()),M=Object(c.b)(function(t){var e=t.goods,o=t.topGoods,n=t.goodsDetail;return{goods:e,topGoods:o.data,goodsDetail:n.data}},{fetchGoods:u.s,clearSearchList:u.q,clearGoodsList:u.p,fetchGoodsDetail:u.t,fetchTopGoods:u.u,goodsDataReport:u.v})(n=function(t){var e,o;function n(t){var e,o,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,e=!(r=y(n).call(this,t))||"object"!==d(r)&&"function"!=typeof r?w(o):r,S(w(w(e)),"state",{goodsList:[],hasMore:!0,isLoadingMore:!1,page:1}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(n,s["Component"]),m(n,null,[{key:"getInitialProps",value:(e=a.a.mark(function t(e){var o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.reduxStore,e.isServer,o=e.pathname,t.abrupt("return",{pathname:o});case 2:case"end":return t.stop()}},t,this)}),o=function(){var t=this,o=arguments;return new Promise(function(n,r){var a=e.apply(t,o);function s(t){b(a,n,r,s,i,"next",t)}function i(t){b(a,n,r,s,i,"throw",t)}s(void 0)})},function(t){return o.apply(this,arguments)})}]),m(n,[{key:"componentDidMount",value:function(){Object(l.i)({page:"search"}),this.props.clearSearchList()}},{key:"_loadMoreData",value:function(){var t=this.props.goods,e=this;e.setState({isLoadingMore:!0}),e.state.hasMore?(e.setState({page:++e.state.page}),e.props.fetchGoods(function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){S(t,e,o[e])})}return t}({},e.state.params,{page:e.state.page})).then(function(o){var n=o.goods.list,r=e.state.goodsList;r.length||(r=t.data),n&&n.length<p.e?e.setState({hasMore:!1,goodsList:r.concat(n)}):e.setState({goodsList:r.concat(n),hasMore:!0,isLoadingMore:!1})})):this.setState({isLoadingMore:!1})}},{key:"render",value:function(){var t=this,e=this.props,o=e.goods,n=e.err,r=e.pathname,a=this.state.goodsList.length>0?this.state.goodsList:o&&o.data;return n?i.a.createElement(h.b,{err:n}):i.a.createElement(L,null,i.a.createElement(h.f,g({path:r,tags:p.a,isLoading:o.fetching,hasnoGoods:0==a.length,onBlur:function(){return t.props.clearSearchList()},onChange:function(e){e.page=t.state.page,t.setState({params:e}),t.props.fetchGoods(e)}},this.props)),i.a.createElement(h.c,{pathname:r,goodsList:a||[],dataReport:this.props.goodsDataReport}),a.length>=p.e&&i.a.createElement(h.e,{isLoadingMore:this.state.isLoadingMore,hasMore:this.state.hasMore,loadMoreFn:this._loadMoreData.bind(this)}))}}]),n}())||n}},[[837,1,0]]]);